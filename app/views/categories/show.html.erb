<div class="bs-component text-center">
  <h1><%= @category.title %></h1> 
  <br>
</div>


<div class="container-fluid text-center">
  <div class="row">
    <div class="col-2 d-flex flex-column align-items-center border"> 
        <%= search_form_for @q_filter, url: category_path(@category.id), data: {controller: "search", action: "input->search#submit"} do |f| %>    
          <ul>   
            <h2>Couleur</h2>                                    
            <% Product.where(category: @category).where.not(color:nil).each do |product| %> 
              <li style="list-style-type:none">
                <% if params['q'] != nil && params['q']['color_eq_any'] != nil && params['q']['color_eq_any'].include?(product.color)  %>
                  <%= check_box_tag('q[color_eq_any][]', product.color, true) %>              
                <% else %> 
                  <%= check_box_tag('q[color_eq_any][]', product.color, false) %>                
                <% end %>
                <%= product.color %>
              </li>                                              
            <% end %>  
          </ul>

          <ul>  
            <h2>Marque</h2>
            <% Product.where(category: @category).where.not(brand:nil).each do |product| %> 
            <li style="list-style-type:none">
                <% if params['q'] != nil && params['q']['brand_eq_any'] != nil && params['q']['brand_eq_any'].include?(product.brand)  %>
                  <%= check_box_tag('q[brand_eq_any][]', product.brand, true) %>               
                <% else %> 
                  <%= check_box_tag('q[brand_eq_any][]', product.brand, false) %>               
                <% end %>      
                <%= product.brand %> 
            </li>                                             
            <% end %>    
          </ul>
        <% end %>

        <%= search_form_for @q_filter, url: category_path(@category.id) do |f| %>    
            <h2>Prix</h2>
            <p>Prix mini : <%= f.number_field :price_gteq, style:"width:150px" %> €</p>
            <p>Prix maxi : <%= f.number_field :price_lteq, style:"width:150px"  %> €</p> 
            <%= f.submit "Filter les prix", class:"btn btn-primary1" %> <br><br>
        <% end %>
        <%= link_to "Supprimer les filtres", category_path(@category.id), class:"btn btn-outline4" %><br>

    </div>





    <div class="col-10 border">
      <section class="items-section">
          <div class="row">
          <%= render @products %>
      </section>
    </div>
  </div>
</div>





